/*
 * main.c
 *
 *  Created on: Apr 27, 2023
 *      Author: ziadayman
 */


/*
#include <stdio.h>
#include <string.h>
#include <ctype.h>

void Main_Menu ()
{
	printf ("\n****** Welcome to Booking.com ******\n");
    printf ("\nIf you want to register please enter a\n");
    printf ("\nIf you already have an account please enter b\n");
}

void Register ()
{
	FILE *fp;
	char mail[50];
	char pass[50];
	char buffer[1024];
	char file[256] = "/Users/ziadayman/Desktop/Booking Site/Book1.txt";

	///////////////////////////Mail///////////////////////
	printf ("Please enter you Email \n");
	scanf("%s", mail);
	char *find1 = strchr(mail, '@');
	char *find2 = strstr(mail, ".com");

	if (find1)
	{
		if (find2)
		{

		}
	}

	else
	{
		printf ("Invalid Mail\n");
		Register();
	}

	 fp = fopen(file, "r");
	    if (fp == NULL)
	    {
	        printf("Error opening file %s\n", file);
	    }

	while (fgets(buffer, sizeof(buffer), fp) != NULL)
	{
	        if (strstr(buffer, mail) != NULL)
	        {
	            printf("This mail is taken\n");
	            fclose(fp);
	            Register();
	            break;
	        }
	    }
	///////////////////////////////////Pass///////////////////////


	printf ("Please enter you Password \n");
	scanf ("%s",pass);

	if (strlen(pass) == 0)
	{
		printf ("Invalid Password\n");
		Register();
	}



	//////////////////////////////////////Adding///////////////////

	fp = fopen(file, "a");

		if (fp == NULL)
		{
		        printf("Error opening file %s\n", file);
		}
	fprintf(fp, "%s\n", mail);
	fprintf(fp, "%s\n", pass);

	fclose(fp);




}

void Start()
{
	int run =1;
	char input;

	Main_Menu();

	while (run == 1)
	{
		scanf (" %c" , &input);

		switch (input)
		{
		case 'a': Register();
				break;
		}
	}
}


int main()
{
	Start();
}
*/

#include <stdio.h>
#include <string.h>

#define MAX_EMAIL_LEN 256
#define MAX_PASS_LEN 256

int main() {
    FILE *fp;
    char file_name[256];
    char email[MAX_EMAIL_LEN];
    char password[MAX_PASS_LEN];
    char buffer[MAX_EMAIL_LEN + MAX_PASS_LEN + 2]; // 2 is for ":" and "\n"

    // prompt the user for the file name, email and password
    printf("Enter the name of the file to open: ");
    scanf("%s", file_name);
    printf("Enter your email: ");
    scanf("%s", email);
    printf("Enter your password: ");
    scanf("%s", password);

    // open the file for reading
    fp = fopen(file_name, "r");
    if (fp == NULL) {
        printf("Error opening file %s\n", file_name);
        return -1;
    }

    // search for the email and password in the file
    while (fgets(buffer, sizeof(buffer), fp) != NULL) {
        // split the buffer into email and password
        char *e = strtok(buffer, ":");
        char *p = strtok(NULL, "\n");

        // compare the email and password
        if (strcmp(e, email) == 0 && strcmp(p, password) == 0) {
            printf("Login successful\n");
            fclose(fp);
            return 0;
        }
    }

    // close the file
    fclose(fp);

    printf("Invalid email or password\n");

    return 0;
}

